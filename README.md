# üó™ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –ø–æ–º–æ—â–Ω–∏–∫

## ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

–°–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ [—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É](https://docs.yandex.ru/docs/view?url=ya-disk-public%3A%2F%2FvP9DuuSIlMqd6GVrgSSECelmO3zjz9Gb2NdvcODb0N6PEOJFjQOhEXisZa3B%2FD7Pq%2FJ6bpmRyOJonT3VoXnDag%3D%3D&name=–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ%20–ø–æ%20–Ω–∞—Å–æ—Å–∞–º%20—à–ª–∞–º–æ–≤—ã–º%204%20DY%20-AHF.pdf&nosw=1). –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —Ç–µ—Ö–Ω–∏–∫–∞ RAG.

## üì± UI

![UI](docs/ui.png)

## ‚öôÔ∏è –°–µ—Ä–≤–∏—Å—ã

- **backend üóÑÔ∏è**

  - API –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
  - –õ–æ–≥–∏–∫–∞ RAG, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å –ø–æ–º–æ—â—å—é `langchain`
- **frontend üñºÔ∏è**

  - Streamlit UI, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `http://backend:8000`

## üõ†Ô∏è –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ä–≤–∏—Å–æ–º

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–≤–∏—Å–æ–º:

1. –¢–∞–∫ –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–∏—á–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–ª–∞—Å—å –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ, –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞–Ω–∫–∏ –∏ –∏—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `Qdrant` –±—ã–ª–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã. –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Å —ç—Ç–æ–π —á–∞—Å—Ç—å—é —Ä–∞–±–æ—Ç –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –≤ `notebooks/rag_research.ipynb`.
2. –ü–æ –ø—Ä–∏—á–∏–Ω–µ, –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—É–Ω–∫—Ç–µ, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –æ–±–ª–∞–∫–æ `Qdrant`. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∞–≤—Ç–æ—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ Telegram - @Khrstln.
3. –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –º–æ–¥–µ–ª—è–º OpenAI –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Å–µ—Ä–≤–∏—Å ProxyAPI.

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Qdrant —É –∞–≤—Ç–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. `git clone https://github.com/khrstln/RAG-system.git`
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env`, –≤ –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–Ω–µ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

   * PROXYAPI_KEY - –í–∞—à API-–∫–ª—é—á, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–∏—Å–∞ ProxyAPI
   * PROXYAPI_BASE_URL="https://api.proxyapi.ru/openai/v1"
   * QDRANT_API_KEY - API-–∫–ª—é—á –æ–±–ª–∞–∫–∞ `Qdrant`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —É –∞–≤—Ç–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Telegram - @Khrstln)
   * QDRANT_URL - URL –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `Qdrant`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —É –∞–≤—Ç–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Telegram - @Khrstln)
   * BACKEND_URL="http://backend:8000"
3. –í cmd –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É: `docker-compose up --build`
4. UI —Å–µ—Ä–≤–∏—Å–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8501/`

## üèÜ–†–µ–∑—É–ª—å—Ç–∞—Ç—ã

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –ø–æ–∑–≤–æ–ª–∏–ª–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é `pdf2image` –∏ `pytesseract`.
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ç–µ—Ö–Ω–∏–∫ RAG, —Ç–∞–∫–∏—Ö –∫–∞–∫ HyDE –∏ Multi-Query, –∞ —Ç–∞–∫–∂–µ LLM `gpt-4o-mini` —É–¥–∞–ª–æ—Å—å –¥–æ—Å—Ç–∏—á—å –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –° –æ—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –≤ jupyter-–Ω–æ—É—Ç–±—É–∫–µ `notebooks/rag_research.ipynb`.
* –í –∫–∞—á–µ—Å—Ç–≤–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `BERTScore F1`. –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é –º–æ–¥–µ–ª–∏ `gpt-o3`, –∫–æ—Ç–æ—Ä–æ–π –Ω–∞ –≤—Ö–æ–¥ –ø–æ–¥–∞–≤–∞–ª—Å—è –∏—Å—Ö–æ–¥–Ω—ã–π pdf-—Ñ–∞–π–ª. –§–∏–Ω–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `BERTScore F1` –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–π–æ–Ω–µ ~0.83. –í–µ—Ä–æ—è—Ç–Ω–æ, –≤–µ—Å—å–º–∞ –Ω–µ–≤—ã—Å–æ–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω—ã —Ç–µ–º, —á—Ç–æ `gpt-o3` –¥–∞–≤–∞–ª–∞ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, "–≤–∏–¥—è" –≤–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º, –∞ —Ç–∞–∫–∂–µ –Ω–∞–ª–∏—á–∏–µ–º –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π OCR, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–ª–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Å—Ö–µ–º—ã.

## üìà –†–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ RAG –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ:

- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞—Ç—å –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –±–æ–ª–µ–µ —É–∑–∫–æ—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü, –ø—Ä–æ–≤–µ–µ—Å—Ç–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å**: –í –ø–æ–¥–æ–±–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –Ω–∞ —Å—Ö–µ–º–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ä–∞—Å—à–∏—Ä–∏—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –∏ –ø–æ–≤—ã—Å–∏—Ç –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤.
- **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ RAG**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∞–∫–∏—Ö —Ç–µ—Ö–Ω–∏–∫, –∫–∞–∫ SelfQuery, FLARE, —Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é CrossEncoder'–∞ –∏ –¥—Ä. –ü—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ LLM –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ.
